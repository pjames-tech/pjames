---
// FAQ Section - Clean accordion with category filters
// Inspired by modern UI patterns with icons and pill filters

interface FAQ {
  question: string;
  answer: string;
  category: "general" | "process" | "pricing" | "support";
  icon: string; // SVG path
}

const categories = [
  { id: "general", label: "General" },
  { id: "process", label: "Process" },
  { id: "pricing", label: "Pricing" },
  { id: "support", label: "Support" },
];

const faqs: FAQ[] = [
  {
    question: "Do you just design logos, or build the whole system?",
    answer: "I am a Systems Architect, not just a graphic designer. While I create world-class visual identities, my primary focus is the entire revenue ecosystem: your brand positioning, your web infrastructure, and the automation pipelines that turn visitors into clients. You get a complete business engine, not just a pretty picture.",
    category: "general",
    icon: "M9 12h.01M12 12h.01M15 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
  },
  {
    question: "What makes your 'AI-First' approach different?",
    answer: "Most agencies build static websites that sit there. I build dynamic systems powered by AI. This means your platform can qualify leads, schedule appointments, and personalize content automatically. We use proprietary AI workflows to accelerate development, meaning you get enterprise-grade tech at a fraction of the traditional timeline.",
    category: "general",
    icon: "M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
  },
  {
    question: "How long does a typical project take?",
    answer: "Speed is a core protocol. A standard 'Brand Identity Sprint' takes 5 days. The full 'Conversion Engine' web build typically takes 2-3 weeks. Complex custom architectures (SaaS, Web Apps) generally range from 4-6 weeks. We move fast because we utilize a modular, pre-engineered code base.",
    category: "process",
    icon: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
  },
  {
    question: "What is your revision policy?",
    answer: "All packages include 2 rounds of revisions to ensure you're fully satisfied. Additional revision rounds can be added if needed. I believe in collaborative iteration - your feedback shapes the final result.",
    category: "process",
    icon: "M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
  },
  {
    question: "Do I own the code and assets?",
    answer: "100%. Once the project is paid for, you own every pixel, line of code, and strategy document. We do not hold your brand hostage. You will receive a complete handoff package with source files, access keys, and training on how to run your new system.",
    category: "pricing",
    icon: "M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
  },
  {
    question: "What are your payment terms?",
    answer: "I require 50% upfront to begin work, with the remaining 50% due upon project completion. For larger projects, we can arrange milestone-based payments. I accept bank transfers, PayPal, and crypto.",
    category: "pricing",
    icon: "M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
  },
  {
    question: "How does support work after launch?",
    answer: "All projects include 14 days of post-launch support for bug fixes and minor adjustments. Extended support packages are available for ongoing maintenance, updates, and strategic guidance.",
    category: "support",
    icon: "M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"
  },
  {
    question: "I have a custom requirement. Can you handle it?",
    answer: "Likely, yes. I have deployed everything from real estate AI chatbots to fintech dashboards. If it involves web technology and automation, I can architect it. Book a consultation to discuss your specific infrastructure needs.",
    category: "support",
    icon: "M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
  }
];
---

<section id="faq" class="py-36 container-fluid max-w-4xl mx-auto px-6">
  
  <!-- Header -->
  <div class="mb-12 text-center">
    <h2 class="font-display font-bold text-4xl md:text-5xl text-white mb-4">
      Frequently asked questions
    </h2>
    <p class="text-zinc-400 max-w-xl mx-auto">
      These are the most commonly asked questions about my services.
      <br />
      Can't find what you're looking for? <button id="open-archibot-faq" class="text-white underline underline-offset-4 hover:text-[#FF7300] transition cursor-pointer">Chat with ARCHIBOT</button>!
    </p>
  </div>

  <!-- Category Filter Pills -->
  <div class="flex flex-wrap justify-center gap-2 mb-10">
    <button 
      class="faq-filter px-5 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-white text-black"
      data-category="all"
    >
      All
    </button>
    {categories.map((cat) => (
      <button 
        class="faq-filter px-5 py-2 rounded-full text-sm font-medium transition-all duration-200 bg-transparent text-zinc-400 border border-zinc-700 hover:border-zinc-500 hover:text-white"
        data-category={cat.id}
      >
        {cat.label}
      </button>
    ))}
  </div>

  <!-- FAQ Items -->
  <div class="space-y-3" id="faq-list">
    {faqs.map((faq, index) => (
      <div 
        class="faq-item border-b border-zinc-800 last:border-b-0" 
        data-category={faq.category}
      >
        <button class="faq-trigger w-full flex items-center gap-4 py-5 text-left focus:outline-none group">
          <!-- Icon -->
          <span class="flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-xl bg-zinc-900 border border-zinc-800 text-zinc-400 group-hover:text-[#FF7300] group-hover:border-[#FF7300]/30 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d={faq.icon} />
            </svg>
          </span>
          
          <!-- Question -->
          <span class="flex-1 font-medium text-base md:text-lg text-zinc-200 group-hover:text-white transition-colors">
            {faq.question}
          </span>
          
          <!-- Chevron -->
          <span class="faq-chevron flex-shrink-0 text-zinc-500 transition-transform duration-300">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </span>
        </button>
        
        <!-- Answer -->
        <div class="faq-content grid grid-rows-[0fr] transition-[grid-template-rows] duration-300 ease-out">
          <div class="overflow-hidden">
            <div class="pb-5 pl-14 pr-10 text-zinc-400 leading-relaxed text-sm md:text-base">
              {faq.answer}
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>

</section>

<script>
  const initFAQ = () => {
    const filters = document.querySelectorAll('.faq-filter');
    const items = document.querySelectorAll('.faq-item');
    const triggers = document.querySelectorAll('.faq-trigger');

    // Filter functionality
    filters.forEach(filter => {
      filter.addEventListener('click', () => {
        const category = filter.getAttribute('data-category');
        
        // Update active filter styling
        filters.forEach(f => {
          f.classList.remove('bg-white', 'text-black');
          f.classList.add('bg-transparent', 'text-zinc-400', 'border', 'border-zinc-700');
        });
        filter.classList.remove('bg-transparent', 'text-zinc-400', 'border', 'border-zinc-700');
        filter.classList.add('bg-white', 'text-black');
        
        // Filter items
        items.forEach(item => {
          const itemCategory = item.getAttribute('data-category');
          if (category === 'all' || itemCategory === category) {
            item.classList.remove('hidden');
          } else {
            item.classList.add('hidden');
          }
        });
      });
    });

    // Accordion functionality
    triggers.forEach(trigger => {
      trigger.addEventListener('click', () => {
        const item = trigger.closest('.faq-item');
        const content = item?.querySelector('.faq-content');
        const chevron = item?.querySelector('.faq-chevron');
        
        // Close all other items
        document.querySelectorAll('.faq-content').forEach(c => {
          if (c !== content && c.classList.contains('grid-rows-[1fr]')) {
            c.classList.remove('grid-rows-[1fr]');
            c.classList.add('grid-rows-[0fr]');
            const otherChevron = c.closest('.faq-item')?.querySelector('.faq-chevron');
            if (otherChevron) otherChevron.classList.remove('rotate-180');
          }
        });

        // Toggle current item
        if (content) {
          if (content.classList.contains('grid-rows-[1fr]')) {
            content.classList.remove('grid-rows-[1fr]');
            content.classList.add('grid-rows-[0fr]');
            if (chevron) chevron.classList.remove('rotate-180');
          } else {
            content.classList.remove('grid-rows-[0fr]');
            content.classList.add('grid-rows-[1fr]');
            if (chevron) chevron.classList.add('rotate-180');
          }
        }
      });
    });
  };

  document.addEventListener('DOMContentLoaded', initFAQ);
  document.addEventListener('astro:page-load', initFAQ);

  // Open ChatBot when "Chat with ARCHIBOT" is clicked
  const initArchibotLink = () => {
    const btn = document.getElementById('open-archibot-faq');
    if (btn) {
      btn.addEventListener('click', () => {
        // Dispatch custom event to open the ChatBot
        window.dispatchEvent(new CustomEvent('open-archibot'));
      });
    }
  };
  
  document.addEventListener('DOMContentLoaded', initArchibotLink);
  document.addEventListener('astro:page-load', initArchibotLink);
</script>
